<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>部署SCNUOJ | lr580&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="lr580,lr580's Blog" />
  
  <meta name="description" content="部署SCNUOJ 前置条件：服务器为2核4G内存60G硬盘5M带宽的腾讯云，ubuntu20.04，刚租完开机的初始状态  SCNUOJ代码仓  安装 拉仓库腾讯云默认登录是 ubuntu 用户，先提个权： 1sudo su root 下才能操作并新建这个 &#x2F;var&#x2F;www&#x2F;scnuoj 目录，以该目录为项目根目录。  因为下文 git clone 会新建文件夹，所以实际上在 &#x2F;var&#x2F;www 执">
<meta property="og:type" content="article">
<meta property="og:title" content="部署SCNUOJ">
<meta property="og:url" content="https://lr580.github.io/2023/09/02/SCNUOJ%E9%83%A8%E7%BD%B2/index.html">
<meta property="og:site_name" content="lr580&#39;s blog">
<meta property="og:description" content="部署SCNUOJ 前置条件：服务器为2核4G内存60G硬盘5M带宽的腾讯云，ubuntu20.04，刚租完开机的初始状态  SCNUOJ代码仓  安装 拉仓库腾讯云默认登录是 ubuntu 用户，先提个权： 1sudo su root 下才能操作并新建这个 &#x2F;var&#x2F;www&#x2F;scnuoj 目录，以该目录为项目根目录。  因为下文 git clone 会新建文件夹，所以实际上在 &#x2F;var&#x2F;www 执">
<meta property="og:locale">
<meta property="article:published_time" content="2023-09-02T09:00:07.000Z">
<meta property="article:modified_time" content="2023-11-22T05:03:26.596Z">
<meta property="article:author" content="lr580">
<meta property="article:tag" content="心得">
<meta property="article:tag" content="香农先修班">
<meta property="article:tag" content="分享">
<meta name="twitter:card" content="summary">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/pace.min.js"></script>

  

  
  

<meta name="generator" content="Hexo 6.1.0"></head>

<body>
  <div id="container">
      <header id="header">
    <div id="banner"></div>
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/" class="left">
                    <span class="site-title">lr580&#39;s 博客</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a  href="/">
                        <i class="fa fa-home"></i>
                        <span>Home</span>
                    </a>
                    
                    <a  href="/archives">
                        <i class="fa fa-archive"></i>
                        <span>Archives</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
        <div id="header-row">
            <div id="logo">
                <a href="/">
                    <img src="/images/logo.png" alt="logo">
                </a>
            </div>
            <div class="header-info">
                <div id="header-title">
                    
                    <h2>
                        lr580&#39;s 博客
                    </h2>
                    
                </div>
                <div id="header-description">
                    
                    <h3>
                        建设期，不定期更新。
                    </h3>
                    
                </div>
            </div>
            <nav class="header-nav">
                <div class="social">
                    
                        <a title="Github" target="_blank" href="//github.com/lr580">
                            <i class="fa fa-github fa-2x"></i></a>
                    
                        <a title="2277379149"  ">
                            <i class="fa fa-qq fa-2x"></i></a>
                    
                        <a title="洛谷博客" target="_blank" href="//lr580.blog.luogu.org">
                            <i class="fa fa-user-o fa-2x"></i></a>
                    
                        <a title="友链(asympto69的博客)" target="_blank" href="//asympto69.github.io">
                            <i class="fa fa-handshake fa-2x"></i></a>
                    
                </div>
            </nav>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main" class="body-wrap"><article id="post-SCNUOJ部署" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="post-title" itemprop="name">
      部署SCNUOJ
    </h1>
    <div class="post-title-bar">
      <ul>
          
        <li>
          <i class="fa fa-calendar"></i>  2023-09-02
        </li>
        <li>
          <i class="fa fa-eye"></i>
          <span id="busuanzi_value_page_pv"></span>
        </li>
      </ul>
    </div>
  

          
      </header>
    
    <div class="article-entry post-content" itemprop="articleBody">
      
            
            <h2 id="部署SCNUOJ"><a href="#部署SCNUOJ" class="headerlink" title="部署SCNUOJ"></a>部署SCNUOJ</h2><blockquote>
<p>前置条件：服务器为2核4G内存60G硬盘5M带宽的腾讯云，ubuntu20.04，刚租完开机的初始状态</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/scnu-socoding/scnuoj">SCNUOJ代码仓</a></p>
<blockquote>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3></blockquote>
<h4 id="拉仓库"><a href="#拉仓库" class="headerlink" title="拉仓库"></a>拉仓库</h4><p>腾讯云默认登录是 <code>ubuntu</code> 用户，先提个权：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure>
<p>root 下才能操作并新建这个 <code>/var/www/scnuoj</code> 目录，以该目录为项目根目录。</p>
<blockquote>
<p>因为下文 <code>git clone</code> 会新建文件夹，所以实际上在 <code>/var/www</code> 执行下面 clone 即可</p>
</blockquote>
<p>在项目根目录下，克隆仓库：(仓库大小约 ，且可能腾讯云限速问题，故需要一定时间)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/scnu-socoding/scnuoj.git</span><br></pre></td></tr></table></figure>
<blockquote>
<p>(<del>https 不行，会 <code>GnuTLS recv error (-54): Error in the pull function.</code>)</del></p>
<p>git 协议不行，如果本地 git 没有配置用户的话，所以推荐 https 协议</p>
<p>新机子没有密钥，不能 clone，可以生成一个，如：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;lr580@scnu.edu.cn&quot;</span> <span class="comment">#一路回车</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="装依赖"><a href="#装依赖" class="headerlink" title="装依赖"></a>装依赖</h4><blockquote>
<p>腾讯云初始无 composer，需要先：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install composer</span><br></pre></td></tr></table></figure>
<p><code>composer install</code> 会安装当前目录下的 <code>composer.json</code> 的内容，用于管理 PHP 依赖</p>
<p>看看自己装没装 PHP 或核对版本，使用 <code>php -v</code>，查看 composer 需要的版本：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer show --platform</span><br></pre></td></tr></table></figure>
</blockquote>
<p>使用 root 用户，执行：(虽然 root 会提示 <code>Do not run Composer as root/super user!</code>，但是这个目录只有 root 有权限)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer install</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果遇到了：</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">the</span> requested PHP <span class="built_in">extension</span> curl is missing <span class="built_in">from</span> your <span class="keyword">system</span></span><br><span class="line"><span class="keyword">the</span> requested PHP <span class="built_in">extension</span> dom is missing <span class="built_in">from</span> your <span class="keyword">system</span></span><br></pre></td></tr></table></figure>
<p>安装 php 扩展 <code>ext-dom</code> 和 <code>ext-curl</code>，如：(非 root 则 sudo)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install php7.4-dom</span><br><span class="line">apt-get install php-curl</span><br></pre></td></tr></table></figure>
<p>当前还没启动服务器，如果启动了，要重启 apache 或 nginx</p>
<p><del>如果一直卡 connecting，可以连镜像站：</del></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/</span><br><span class="line"><span class="comment">#取消镜像站：</span></span><br><span class="line">composer config -g --<span class="built_in">unset</span> repos.packagist</span><br></pre></td></tr></table></figure>
<p>以 font awesome 为例，如果镜像也不行，可以手动下载：</p>
<p>如在 <a target="_blank" rel="noopener" href="https://github.com/FortAwesome/Font-Awesome/releases">release</a> 找到对应版本(卡connecting的版本)，下载 source code，发给服务器。(我在做这个的时候，connecting 转龟速 download 了，所以暂时不管这个了，这个没做下去)</p>
</blockquote>
<h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><blockquote>
<p>LNMP 其实本来应该 composer 前做的，但是我盲了</p>
<p>LNMP Linux + NGINX + MariaDB + PHP（7.4 或更高版本）</p>
</blockquote>
<p>需要到的 PHP 插件包括 <code>php-curl</code>, <code>php-xml</code>, <code>php-fpm</code>, <code>php-mysql</code>。除去上面装了的，还需要安装：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install php-xml</span><br><span class="line">apt-get install php-fpm</span><br><span class="line">apt-get install php-mysql</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看有没有装数据库：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --version</span><br></pre></td></tr></table></figure>
<p>发现没有，证明 MySQL 或 MariaDB 都没装</p>
</blockquote>
<p>安装：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install mariadb-server</span><br></pre></td></tr></table></figure>
<p>root 下执行 <code>mysql</code> 进入数据库，给数据库添加管理员帐号：(账号密码自取，这里任意)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;lr580&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;1437abcd&#x27;</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;lr580&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<p>新建个数据库：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database scnuoj;</span><br></pre></td></tr></table></figure>
<p>编辑项目根目录 <code>config/db.php</code>，修改 <code>username</code>, <code>password</code> 和对应 <code>dsn</code>，分别是数据库用户名、密码、数据库名，改这几行：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;dsn&#x27;</span> =&gt; <span class="string">&#x27;mysql:host=localhost;dbname=scnuoj&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;username&#x27;</span> =&gt; <span class="string">&#x27;lr580&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;password&#x27;</span> =&gt; <span class="string">&#x27;1437abcd&#x27;</span>,</span><br></pre></td></tr></table></figure>
<h4 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h4><blockquote>
<p>查 <code>nginx -v</code> 发现没装 nginx。</p>
</blockquote>
<p>安装 nginx：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install nginx</span><br></pre></td></tr></table></figure>
<p>修改 <code>/etc/nginx/sites-enabled/default</code>，为：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">root</span> /var/www/scnuoj/web;</span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">index</span> index.php;</span><br><span class="line">    <span class="attribute">server_name</span> scnuoj;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php?<span class="variable">$args</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">        <span class="attribute">include</span> snippets/fastcgi-php.conf;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span> unix:/var/run/php/php7.4-fpm.sock;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>解读：</p>
<ul>
<li><p>第二行表示 IPv4 端口，第三行是 IPv6 端口。</p>
</li>
<li><p>在项目根目录 <code>web/</code> 是 PHP 页面所在，故 <code>/var/www/scnuoj/web</code> 对应那个 PHP 服务器根目录</p>
</li>
<li><p><code>client_max_body_size</code> 不限制客户端请求的请求体大小。通常，这个设置用来控制上传文件的大小</p>
</li>
<li><p>默认索引网页和服务器名配置</p>
</li>
<li><p>将根目录 <code>/</code> 的请求尝试查找匹配的文件或目录，找不到给 index</p>
</li>
<li><p>以 <code>.php</code> 结尾的，特殊处理，连接到套接字</p>
<p>shell 输入下面指令看看那个 pass 是不是存在：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">stat</span> /var/run/php/php7.4-fpm.sock &amp;&gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Unix socket exists.&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Unix socket does not exist.&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>如果上面 LNMP 装了那个插件，应该是 exists 的。</p>
</li>
</ul>
<p>看看 ngnix 是否启动、是否开机自启：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl is-active nginx</span><br><span class="line">systemctl is-enabled nginx</span><br></pre></td></tr></table></figure>
</blockquote>
<p>重启 nginx:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -t <span class="comment">#检查配置语法错误</span></span><br><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>
<blockquote>
<p>启动后，任意客户端尝试访问 <code>http://114.132.159.213/</code>，发现 500，能访问。证明腾讯云默认开了防火墙。</p>
</blockquote>
<h4 id="yii"><a href="#yii" class="headerlink" title="yii"></a>yii</h4><p>在项目根目录执行：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./yii install</span><br></pre></td></tr></table></figure>
<h4 id="判题配置"><a href="#判题配置" class="headerlink" title="判题配置"></a>判题配置</h4><p>sh 命令执行：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -m -u 1536 judge</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>-m</code> 是创建家目录，<code>-u</code> 制定 UID。</p>
</blockquote>
<p>在 <code>judge/</code> 下执行：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>
<blockquote>
<p>执行 make 失败，报错为：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gcc -std=gnu99 -Wall -c -I<span class="regexp">/usr/</span>local<span class="regexp">/mysql/i</span>nclude<span class="regexp">/mysql -I/u</span>sr<span class="regexp">/include/my</span>sql  src/dispatcher.c</span><br><span class="line">src<span class="regexp">/dispatcher.c:33:10: fatal error: mysql/my</span>sql.h: No such <span class="keyword">file</span> or directory</span><br><span class="line">   <span class="number">33</span> | #<span class="keyword">include</span> &lt;mysql/mysql.h&gt;</span><br><span class="line">      |          ^~~~~~~~~~~~~~~</span><br><span class="line">compilation terminated.</span><br><span class="line">make: *** [makefile:<span class="number">2</span>: all] Error <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>执行命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install libmysqlclient-dev</span><br></pre></td></tr></table></figure>
<p>之后再执行，成功，一堆 warning，暂时不管。</p>
<p>启动判题机：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dispather</span><br></pre></td></tr></table></figure>
<p>关闭判题机：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill -9 dispatcher</span><br></pre></td></tr></table></figure>
</blockquote>
<p>以 OI 模式启动判题机：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dispather -o</span><br></pre></td></tr></table></figure>
<p>Polygon 判题机部署，在项目 <code>polygon/</code> 目录：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>
<p>启动出题系统判题机：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./polygon</span><br></pre></td></tr></table></figure>
<h4 id="数据库初始化"><a href="#数据库初始化" class="headerlink" title="数据库初始化"></a>数据库初始化</h4><p>在 nginx 后，500 了，但是没管，现在开始修复。</p>
<p>开启 DEBUG，在 <code>web/inedx.php</code>，注释第四第五行的 defined。</p>
<p>发现无 scnuoj 数据库。上一步没新建，所以数据库那里新建一下。</p>
<p>下一个问题是数据库的数据表不存在。</p>
<p>受 <a target="_blank" rel="noopener" href="https://github.com/scnu-socoding/scnuoj/blob/master/docs/upgrade.md">升级指引</a> 灵感启发，考虑数据库迁移当初始化，执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./yii migrate</span><br></pre></td></tr></table></figure>
<p>之后需要输入 yes，然后输入账号密码和邮箱，是登录该 OJ 的管理员账号基本信息。</p>
<p>重启判题机。至此，部署完毕，访问网页正常。</p>
<h4 id="安装编程语言"><a href="#安装编程语言" class="headerlink" title="安装编程语言"></a>安装编程语言</h4><p>然而，发现只有 C 和 python 能过题，C++ 和 java 并不能过题。继续检查：</p>
<blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc --version</span><br><span class="line">g++ --version</span><br><span class="line">java --version <span class="comment"># javac --version</span></span><br><span class="line">python --version <span class="comment"># python3 --version</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>发现没有安装 c++ 和 java，进行安装：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install g++</span><br><span class="line">apt install default-jdk</span><br></pre></td></tr></table></figure>
<p>安装结束，重新判题，都能过题，其中 C++ 版本为 201402。</p>
<h4 id="验证码支持"><a href="#验证码支持" class="headerlink" title="验证码支持"></a>验证码支持</h4><p>继续测试，发现无法注册新用户。报错为：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Invalid Configuration – yii\base\InvalidConfigException</span><br><span class="line">Either GD PHP <span class="keyword">extension</span> <span class="keyword">with</span> FreeType support or ImageMagick PHP <span class="keyword">extension</span> <span class="keyword">with</span> PNG support <span class="keyword">is</span> <span class="keyword">required</span>.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查找 PHP 配置文件位置：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -i | grep <span class="string">&#x27;Loaded Configuration File&#x27;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>找不到 <code>extension=gd</code> 和 <code>extension=imagick</code> 扩展，故安装 PHP 扩展：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install php-gd</span><br><span class="line">apt-get install imagemagick</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>两个图像处理库，能够支持生成图片验证码。</p>
</blockquote>
<p>执行后，可以正常注册新用户。</p>
<h4 id="下载测试点支持"><a href="#下载测试点支持" class="headerlink" title="下载测试点支持"></a>下载测试点支持</h4><p>无法下载测试点，也无法根据输入生成输出。</p>
<p>提示： 服务器未启用 <code>php-zip</code> 扩展，如需下载测试数据，请安装 <code>php-zip</code> 扩展。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install php-zip</span><br></pre></td></tr></table></figure>
<p>看到后台最大上传文件大小 8M，单个文件 2M，想改一下。</p>
<p>找到 PIP 路径，如输出 <code>php -ini</code> 看，或者直接盲猜 <code>/etc/php/7.4/fpm/php.ini</code>。</p>
<p>可以 <code>ps aux | grep php</code> 找。</p>
<blockquote>
<p>PHP CLI (Command Line Interface) 改这个没用</p>
<p>PHP-FPM (FastCGI Process Manager) 这个才是跑 OJ 的</p>
</blockquote>
<p>修改：(第一个单文件，第二个总)</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">upload_max_filesize</span> = <span class="number">100</span>M</span><br><span class="line"><span class="attr">post_max_size</span> = <span class="number">200</span>M</span><br></pre></td></tr></table></figure>
<blockquote>
<p>vscode remote ssh 改不了可以先 chmod 改完再弄回去 </p>
</blockquote>
<p>重启：(非 root 不 sudo 可能要登录密码)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart php7.4-fpm</span><br><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果改的是 cli 路径下的配置文件，则后台不见效。</p>
</blockquote>
<h2 id="二次开发SCNUOJ"><a href="#二次开发SCNUOJ" class="headerlink" title="二次开发SCNUOJ"></a>二次开发SCNUOJ</h2><h4 id="学号前端修改"><a href="#学号前端修改" class="headerlink" title="学号前端修改"></a>学号前端修改</h4><p>前端、注册把昵称改成真实姓名，学号改成学校班级，先查查有什么文件：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -rnl <span class="string">&quot;学号&quot;</span> .</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>r</code> 递归，<code>n</code> 显示行号，<code>l</code> 显示文件路径</p>
</blockquote>
<p>找到有：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.<span class="regexp">/modules/</span>admin<span class="regexp">/views/u</span>ser/index.php</span><br><span class="line">.<span class="regexp">/modules/</span>admin<span class="regexp">/views/u</span>ser/_search.php</span><br><span class="line">.<span class="regexp">/messages/</span>zh-CN/app.php</span><br><span class="line">.<span class="regexp">/views/</span>site/signup.php</span><br><span class="line">.<span class="regexp">/views/</span>contest/_standing_group.php</span><br><span class="line">.<span class="regexp">/views/u</span>ser/_default.php</span><br></pre></td></tr></table></figure>
<p>全部 ctrl+f 改即可。</p>
<p>昵称同理。修改：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">controllers/GroupController.php</span><br><span class="line">modules<span class="regexp">/admin/m</span>odels/GenerateUserForm.php</span><br><span class="line">modules<span class="regexp">/admin/</span>views<span class="regexp">/contest/</span>clarify.php</span><br><span class="line">modules<span class="regexp">/admin/</span>views<span class="regexp">/user/</span>_search.php</span><br><span class="line">messages<span class="regexp">/zh-CN/</span>app.php</span><br><span class="line">models/User.php</span><br><span class="line">views<span class="regexp">/contest/</span>_standing_group.php</span><br><span class="line">views<span class="regexp">/user/</span>_default.php</span><br></pre></td></tr></table></figure>
<h4 id="关闭评论区"><a href="#关闭评论区" class="headerlink" title="关闭评论区"></a>关闭评论区</h4><p>偷懒，考虑虚假关闭：只不显示前端进去的入口，但是直接 url 可以访问，不真的控制权限。</p>
<blockquote>
<p>根据主页提示词，找到讨论区主页：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> -r <span class="string">&quot;仅展示最近三十则讨论消息，在问题页可以查看该 问题下的所有讨论。&quot;</span> </span><br></pre></td></tr></table></figure>
<p>发现是：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">views<span class="regexp">/discuss/i</span>ndex.php</span><br></pre></td></tr></table></figure>
<p>开 F12，看讨论标签，发现是 <code>fa-comment</code>。</p>
<p>可以把这行字关掉。如改成：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;i class=&quot;fas fa-fw fa-info-circle&quot;&gt;&lt;/i&gt; 论坛功能不予开放，不便之处敬请谅解。</span><br></pre></td></tr></table></figure>
</blockquote>
<p>阅读 <code>view/problem/view.php</code>，发现有 <code>Yii::$app-&gt;setting-&gt;get(&#39;isDiscuss&#39;)</code></p>
<p>继续搜索：<code>grep -r isDiscuss</code>，找到有效的：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modules<span class="regexp">/admin/</span>views<span class="regexp">/setting/i</span>ndex.php</span><br></pre></td></tr></table></figure>
<p>——原来，本来就有这个功能，后台直接选择即可。没事了。</p>
<h4 id="备案号添加"><a href="#备案号添加" class="headerlink" title="备案号添加"></a>备案号添加</h4><blockquote>
<p>域名证书可以在腾讯云直接点击容易搜到下载，如果是腾讯云买的域名</p>
</blockquote>
<p>需要添加两个东西，理论上有内容就行，没有样式要求规定。这里懒，所以只渲染出内容即可。</p>
<p>找到主页为 <code>views/site/index.php</code>，可以在最底下追加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;footer&gt;</span><br><span class="line">    &lt;div style=&quot;text-align: center&quot;&gt;</span><br><span class="line">        &lt;a href=&quot;https://beian.miit.gov.cn/&quot; target=&quot;_blank&quot; style=&quot;color:black&quot;&gt;粤ICP备2023133862号&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/footer&gt;</span><br></pre></td></tr></table></figure>
<p>其中，备案号，可以在 href 里搜，如直接搜 <code>young-oj.cn</code>，就出来了。</p>
<p>相关文件：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/243/61412#.E5.A6.82.E4.BD.95.E6.B7.BB.E5.8A.A0.E7.BD.91.E7.AB.99.E5.A4.87.E6.A1.88.E5.8F.B7.EF.BC.9F">here1</a> <a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/243/19142">here2</a></p>
<p>之后再更新</p>

            <div class="post-copyright">
    <div class="content">
        <p>最后更新： 2023年11月22日 13:03</p>
        <p>原始链接： <a class="post-url" href="/2023/09/02/SCNUOJ%E9%83%A8%E7%BD%B2/" title="部署SCNUOJ">https://lr580.github.io/2023/09/02/SCNUOJ%E9%83%A8%E7%BD%B2/</a></p>
        <footer>
            <a href="https://lr580.github.io">
                <img src="/images/logo.png" alt="lr580">
                lr580
            </a>
        </footer>
    </div>
</div>

      
        
            

        
    </div>
    <footer class="article-footer">
        
        
<div class="post-share">
    <a href="javascript:;" id="share-sub" class="post-share-fab">
        <i class="fa fa-share-alt"></i>
    </a>
    <div class="post-share-list" id="share-list">
        <ul class="share-icons">
          <li>
            <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://lr580.github.io/2023/09/02/SCNUOJ%E9%83%A8%E7%BD%B2/&title=《部署SCNUOJ》 — lr580's blog&pic=https://lr580.github.ioimages/logo.png" data-title="微博">
              <i class="fa fa-weibo"></i>
            </a>
          </li>
          <li>
            <a class="weixin share-sns" id="wxFab" href="javascript:;" data-title="微信">
              <i class="fa fa-weixin"></i>
            </a>
          </li>
          <li>
            <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://lr580.github.io/2023/09/02/SCNUOJ%E9%83%A8%E7%BD%B2/&title=《部署SCNUOJ》 — lr580's blog&source=QwQ" data-title="QQ">
              <i class="fa fa-qq"></i>
            </a>
          </li>
          <li>
            <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://lr580.github.io/2023/09/02/SCNUOJ%E9%83%A8%E7%BD%B2/" data-title="Facebook">
              <i class="fa fa-facebook"></i>
            </a>
          </li>
          <li>
            <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《部署SCNUOJ》 — lr580's blog&url=https://lr580.github.io/2023/09/02/SCNUOJ%E9%83%A8%E7%BD%B2/&via=https://lr580.github.io" data-title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li>
            <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://lr580.github.io/2023/09/02/SCNUOJ%E9%83%A8%E7%BD%B2/" data-title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        </ul>
     </div>
</div>
<div class="post-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;" id="wxShare-close">×</a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://lr580.github.io/2023/09/02/SCNUOJ%E9%83%A8%E7%BD%B2/" alt="微信分享二维码">
</div>

<div class="mask"></div>

        
        <ul class="article-footer-menu">
            
            
  <li class="article-footer-tags">
    <i class="fa fa-tags"></i>
      
    <a href="/tags/心得/" class="color3">心得</a>
      
    <a href="/tags/香农先修班/" class="color1">香农先修班</a>
      
    <a href="/tags/分享/" class="color3">分享</a>
      
  </li>

        </ul>
        
    </footer>
  </div>
</article>


    <aside class="post-toc-pos post-toc-top" id="post-toc">
        <nav class="post-toc-wrap">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E9%83%A8%E7%BD%B2SCNUOJ"><span class="post-toc-text">部署SCNUOJ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%AE%89%E8%A3%85"><span class="post-toc-text">安装</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%8B%89%E4%BB%93%E5%BA%93"><span class="post-toc-text">拉仓库</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="post-toc-text">装依赖</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="post-toc-text">数据库</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#nginx"><span class="post-toc-text">nginx</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#yii"><span class="post-toc-text">yii</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%A4%E9%A2%98%E9%85%8D%E7%BD%AE"><span class="post-toc-text">判题配置</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="post-toc-text">数据库初始化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%AE%89%E8%A3%85%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80"><span class="post-toc-text">安装编程语言</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E6%94%AF%E6%8C%81"><span class="post-toc-text">验证码支持</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%B8%8B%E8%BD%BD%E6%B5%8B%E8%AF%95%E7%82%B9%E6%94%AF%E6%8C%81"><span class="post-toc-text">下载测试点支持</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91SCNUOJ"><span class="post-toc-text">二次开发SCNUOJ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%AD%A6%E5%8F%B7%E5%89%8D%E7%AB%AF%E4%BF%AE%E6%94%B9"><span class="post-toc-text">学号前端修改</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%85%B3%E9%97%AD%E8%AF%84%E8%AE%BA%E5%8C%BA"><span class="post-toc-text">关闭评论区</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%A4%87%E6%A1%88%E5%8F%B7%E6%B7%BB%E5%8A%A0"><span class="post-toc-text">备案号添加</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>
    

<nav id="article-nav">
  
    <a href="/2023/10/14/%E4%BF%9D%E7%A0%94%E5%88%86%E4%BA%AB%E4%BC%9A-%E9%87%8D%E7%8E%B0/" id="article-nav-newer" class="article-nav-link-wrap">

      <span class="article-nav-title">
        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
        
          保研分享会-重现
        
      </span>
    </a>
  
  
    <a href="/2023/04/14/%E8%AE%B0%E5%BF%86%E6%9C%AF%E5%88%86%E4%BA%AB%E4%BC%9A-%E9%87%8D%E7%8E%B0/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">记忆术分享会-重现</span>
      <i class="fa fa-hand-o-right" aria-hidden="true"></i>
    </a>
  
</nav>



    
	
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<div id="gitalk-container"></div> <!--评论区实际地方-->
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
<script type="text/javascript">
    var id = md5(window.location.pathname) //怕太长了
    var gitalk = new Gitalk({
        clientID: '6e8ca84614e8d6de868c',
        clientSecret: 'bd819b13650d089fa5e4708a9a5cd16bb122206d',
        id: id,
        repo: 'lr580.github.io',
        owner: 'lr580',
        admin: [''], 
        labels: 'gitalk'.split(',').filter(l => l),
        perPage: 15,
    	pagerDirection: 'last',
		language: 'zh-CN',
    })
    gitalk.render('gitalk-container')
	//document.write(id) //调试输出
</script>


    
</section>
        
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


      <p>
        Powered by  <a href="http://hexo.io/" target="_blank">Hexo</a>
        Theme <a href="//github.com/wongminho/hexo-theme-miho" target="_blank">MiHo</a>
      &copy; 2023 lr580<br>
      </p>
    </div>
  </div>
</footer>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>
  var mihoConfig = {
      root: "https://lr580.github.io",
      animate: true,
      isHome: false,
      share: true,
      reward: 0
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/tags/ACM/" style="font-size: 12px;">ACM</a> <a href="/tags/MUPAD/" style="font-size: 10px;">MUPAD</a> <a href="/tags/SP/" style="font-size: 10px;">SP</a> <a href="/tags/md/" style="font-size: 16px;">md</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 20px;">分享</a> <a href="/tags/%E5%B0%8F%E8%AF%B4/" style="font-size: 12px;">小说</a> <a href="/tags/%E5%BF%83%E5%BE%97/" style="font-size: 14px;">心得</a> <a href="/tags/%E5%BF%83%E7%90%86%E5%AD%A6/" style="font-size: 10px;">心理学</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">笔记</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 18px;">算法</a> <a href="/tags/%E8%85%90%E7%AB%B9%E6%B8%85%E6%B1%A4/" style="font-size: 12px;">腐竹清汤</a> <a href="/tags/%E8%B5%84%E6%BA%90/" style="font-size: 18px;">资源</a> <a href="/tags/%E9%A6%99%E5%86%9C%E5%85%88%E4%BF%AE%E7%8F%AD/" style="font-size: 16px;">香农先修班</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">&times;</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a  href="/">
                    <i class="fa fa-home"></i><span>Home</span>
                </a>
            </li>
            
            <li>
                <a  href="/archives">
                    <i class="fa fa-archive"></i><span>Archives</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/tags/ACM/" style="font-size: 12px;">ACM</a> <a href="/tags/MUPAD/" style="font-size: 10px;">MUPAD</a> <a href="/tags/SP/" style="font-size: 10px;">SP</a> <a href="/tags/md/" style="font-size: 16px;">md</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 20px;">分享</a> <a href="/tags/%E5%B0%8F%E8%AF%B4/" style="font-size: 12px;">小说</a> <a href="/tags/%E5%BF%83%E5%BE%97/" style="font-size: 14px;">心得</a> <a href="/tags/%E5%BF%83%E7%90%86%E5%AD%A6/" style="font-size: 10px;">心理学</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">笔记</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 18px;">算法</a> <a href="/tags/%E8%85%90%E7%AB%B9%E6%B8%85%E6%B1%A4/" style="font-size: 12px;">腐竹清汤</a> <a href="/tags/%E8%B5%84%E6%BA%90/" style="font-size: 18px;">资源</a> <a href="/tags/%E9%A6%99%E5%86%9C%E5%85%88%E4%BF%AE%E7%8F%AD/" style="font-size: 16px;">香农先修班</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">&times;</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>

<script src="/js/search.js"></script>


<script src="/js/main.js"></script>



  <script src="//cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script>
  <div id="particles"></div>
  
<script src="/js/particles.js"></script>








  
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">

  <script src="//cdn.bootcss.com/scrollReveal.js/3.0.5/scrollreveal.js"></script>
  
<script src="/js/animate.js"></script>



  
<script src="/js/pop-img.js"></script>

  <script>
     $(".article-entry p img").popImg();
  </script>

  </div>
</body>
</html>